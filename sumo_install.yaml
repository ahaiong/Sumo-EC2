#cloud-config
runcmd:
- mkdir /usr/local/SumoCollector
write_files:
- encoding: b64
  content: ewogICJhcGkudmVyc2lvbiI6InYxIiwKICAic291cmNlcyI6W3sKICAgICJuYW1lIjoiQ3JvbiBMb2dzIiwKICAgICJjYXRlZ29yeSI6InRlc3QvbGludXgvY3JvbiIsCiAgICAicGF0aEV4cHJlc3Npb24iOiIvdmFyL2xvZy9jcm9uKiIsCiAgICAiY3V0b2ZmUmVsYXRpdmVUaW1lIjoiLTFoIiwKICAgICJzb3VyY2VUeXBlIjoiTG9jYWxGaWxlIgogIH0sewogICAgIm5hbWUiOiJIb3N0IE1ldHJpY3MiLAogICAgImNhdGVnb3J5IjoidGVzdC9saW51eC9ob3N0LW1ldHJpY3MiLAogICAgImN1dG9mZlRpbWVzdGFtcCI6MCwKICAgICJpbnRlcnZhbCI6NjAwMDAsCiAgICAibWV0cmljcyI6WyJDUFVfVXNlciIsIkNQVV9TeXMiLCJDUFVfTmljZSIsIkNQVV9JZGxlIiwiQ1BVX0lPV2FpdCIsIkNQVV9JcnEiLCJDUFVfU29mdElycSIsIkNQVV9TdG9sZW4iLCJDUFVfTG9hZEF2Z18xbWluIiwiQ1BVX0xvYWRBdmdfNW1pbiIsIkNQVV9Mb2FkQXZnXzE1bWluIiwiTWVtX1RvdGFsIiwiTWVtX1VzZWQiLCJNZW1fRnJlZSIsIk1lbV9BY3R1YWxGcmVlIiwiTWVtX0FjdHVhbFVzZWQiLCJNZW1fVXNlZFBlcmNlbnQiLCJNZW1fRnJlZVBlcmNlbnQiLCJNZW1fUGh5c2ljYWxSYW0iLCJUQ1BfSW5ib3VuZFRvdGFsIiwiVENQX091dGJvdW5kVG90YWwiLCJUQ1BfRXN0YWJsaXNoZWQiLCJUQ1BfTGlzdGVuIiwiVENQX0lkbGUiLCJUQ1BfQ2xvc2luZyIsIlRDUF9DbG9zZVdhaXQiLCJUQ1BfQ2xvc2UiLCJUQ1BfVGltZVdhaXQiLCJOZXRfSW5QYWNrZXRzIiwiTmV0X091dFBhY2tldHMiLCJOZXRfSW5CeXRlcyIsIk5ldF9PdXRCeXRlcyIsIkRpc2tfUmVhZHMiLCJEaXNrX1JlYWRCeXRlcyIsIkRpc2tfV3JpdGVzIiwiRGlza19Xcml0ZUJ5dGVzIiwiRGlza19RdWV1ZSIsIkRpc2tfSW5vZGVzQXZhaWxhYmxlIiwiRGlza19Vc2VkIiwiRGlza19BdmFpbGFibGUiXSwKICAgICJzb3VyY2VUeXBlIjoiU3lzdGVtU3RhdHMiCiAgfSx7CiAgICAibmFtZSI6IkxpbnV4IFN5c3RlbSBBdWRpdCBMb2dzIiwKICAgICJjYXRlZ29yeSI6InRlc3QvbGludXgvc3lzdGVtIiwKICAgICJwYXRoRXhwcmVzc2lvbiI6Ii92YXIvbG9nL2F1ZGl0LyoubG9nKiIsCiAgICAiY3V0b2ZmUmVsYXRpdmVUaW1lIjoiLTFoIiwKICAgICJzb3VyY2VUeXBlIjoiTG9jYWxGaWxlIgogIH0sewogICAgIm5hbWUiOiJMaW51eCBTeXN0ZW0gTWVzc2FnZXMgTG9ncyIsCiAgICAiY2F0ZWdvcnkiOiJ0ZXN0L2xpbnV4L3N5c3RlbSIsCiAgICAicGF0aEV4cHJlc3Npb24iOiIvdmFyL2xvZy9tZXNzYWdlcyoiLAogICAgImN1dG9mZlJlbGF0aXZlVGltZSI6Ii0xaCIsCiAgICAic291cmNlVHlwZSI6IkxvY2FsRmlsZSIKICB9LHsKICAgICJuYW1lIjoiTGludXggU3lzdGVtIFNlY3VyZSBMb2ciLAogICAgImNhdGVnb3J5IjoidGVzdC9saW51eC9zeXN0ZW0iLAogICAgInBhdGhFeHByZXNzaW9uIjoiL3Zhci9sb2cvc2VjdXJlKiIsCiAgICAiY3V0b2ZmUmVsYXRpdmVUaW1lIjoiLTFoIiwKICAgICJzb3VyY2VUeXBlIjoiTG9jYWxGaWxlIgogIH1dCn0=
  owner: root:root
  path: /usr/local/SumoCollector/sources.json
runcmd:
 - wget "https://collectors.sumologic.com/rest/download/linux/64" -O SumoCollector.sh
 - chmod +x SumoCollector.sh
 - ./SumoCollector.sh -q -Vsumo.token_and_url=U1VNTzZRYjZ2TElIV0V4T3k4cW1CN3AxeXE5SWdWcm1odHRwczovL2NvbGxlY3RvcnMuYXUuc3Vtb2xvZ2ljLmNvbQ== -VsyncSources=sources.json -Vephemeral=true

